## 网关统一接口调用

### 接口说明

* 请求类型 : POST

**域名列表**

| 序号  | 环境  | 请求地址                                            |
| :---: | :---: | :-------------------------------------------------- |
|   1   | 测试  | test-etc.ebaas.com                                  |
|   2   | 生产  | 经纪渠道：openapi.ebaas.com<br/>开发商：gw.leju.com |

**请求地址**

* /api/gateway

### 请求参数
`requestBody`

| 参数            | 类型   | 是否必填 | 最大长度 | 描述                                                  | 示例值           |
| :-------------- | :----- | :------- | -------- | :---------------------------------------------------- | :--------------- |
| app_id          | String | 是       | 16       | 应用ID；16位字符串（ETC开放平台获取）                 | OIG0AF4DMOK2VC2N |
| nonce           | String | 是       | 6        | 6位随机字符                                           | 123AO9           |
| timestamp       | Long   | 是       | 13       | 13位请求时间戳                                        | 1604990109987    |
| sign            | String | 是       | 255      | 将请求参数按字典排序后使用私钥进行RSA签名生成的字符串 | 1VUinhsNiIdF+w   |
| client_sign     | String | 否       |          | 客户端签名包                                          |                  |
| api_code        | String | 是       | 64       | 业务接口code码                                        | test.add         |
| request_content | String | 否       |          | 业务接口参数                                          |                  |

### 请求样例

```
{
  "app_id" : "OIG0AF4DMOK2VC2N",
  "nonce" : "123AO9",
  "timestamp" : 1604990109987,
  "sign": "1VUinhsNiIdF+w2BJ5tChfyxMHOfgPf+4FhJyTH7Mrr/WNx57ndZhWjaal62/WKMf0M49n+WHWbXmb5qY0wyiSSrz5HK/dd/bkDK6BBFLn4IbR3XCF4wxJ48mm8nrRvNQ2MY3RGug1OmmeD8nG5+alpN35sXCgU3aOHyfU5PLfg8=",
  "api_code": "test.add",
  "request_content": "{\"name\": \"测试\"}"
}
```

### 响应参数
| 参数       | 类型       | 是否必填 | 最大长度 | 描述       | 示例值                                    |
| :--------- | :--------- | -------- | -------- | :--------- | :---------------------------------------- |
| request_id | String     | 是       | 64       | 请求ID     | 请求的唯一标识                            |
| code       | String     | 是       | 32       | 响应状态码 | 000状态码为成功响应，其他状态码为失败响应 |
| msg        | String     | 否       | 255      | 响应信息   | 成功或失败的错误信息                      |
| data       | JSONObject | 否       |          | 响应数据   | 业务接口返回的响应数据                    |

### 响应样例

`成功样例`

```
{
  "request_id": "b372be68-6fa6-4590-b927-a4096e6a05e6",
  "code": "200",
  "msg": "成功",
  "data": [
    {
      "testId": 5,
      "testName": "测试"
    }
  ]
}
```

`失败样例`

```
{
  "request_id": "42dd6c6e-247e-487f-87e8-dd97067b877b",
  "code": "401001",
  "msg": "验证签名失败",
  "data": null
}
```
### 网关错误码
| 错误码 | 错误描述                         | 解决方案                                                                                 |
| :----- | :------------------------------- | :--------------------------------------------------------------------------------------- |
| 400    | 参数{paramName}不能为空          | 检查参数名称是否正确，参数是否赋值                                                       |
| 400001 | appId不正确                      | 检查appId是否正确                                                                        |
| 400002 | 接口已停用                       | 联系管理员                                                                               |
| 401001 | 验证签名失败{errorMsg}           | 检查待签名的字符串格式是否正确，检查待签名的字符串是否和当前的签名匹配或根据错误信息处理 |
| 401002 | 无权限访问当前接口               | 检查账号是否有权限或联系管理员                                                           |
| 403001 | 请求时间非法或已过期             | 检查请求时间戳timestamp是否正确，请求有效时间应小于系统时间且在30秒内                    |
| 403002 | 请勿重复请求                     | 使用一个新的临时随机数nonce或等待60秒后重新请求                                          |
| 404001 | 接口不存在                       | 检查apiCode是否正确或联系管理员                                                          |
| 500004 | 业务接口连接被拒绝               | 重试或联系管理员                                                                         |
| 500005 | 业务接口连接超时                 | 重试或联系管理员                                                                         |
| 500006 | 业务接口响应超时                 | 重试或联系管理员                                                                         |
| 500007 | 业务接口响应数据格式不正确       | 重试或联系管理员                                                                         |
| 500008 | 业务接口无响应                   | 重试或联系管理员                                                                         |
| 500009 | 业务接口调用异常                 | 重试或联系管理员                                                                         |
| 500    | 系统异常，请稍后再试或联系管理员 | 请稍后再试或联系管理员                                                                   |