## 网关统一回调接口

**域名列表**



| 序号 | 环境 | 请求地址                       |
| ---- | ---- | ------------------------------ |
| 1    | 测试 | 10.122.153.25:5106             |
| 2    | 生产 | https://etc-callback.ebaas.com |

### 请求地址

* /api/callback

### 请求类型

* POST

### 请求参数

`Body`

| 字段            | 是否必填                     | 描述                                                   | 类型   |
| --------------- | ---------------------------- | ------------------------------------------------------ | ------ |
| callback_url    | 是=callback_url \| callee_no | 请求访问地址路径，和callee_no必填其一，优先于callee_no | String |
| callee_no       | 是=callback_url \|callee_no  | 被回调方编号，和callback_url必填其一                   | String |
| app_id          | 是                           | app_id                                                 | string |
| caller_no       | 否                           | 回调方编号                                             | String |
| message_type    | 是                           | 请求数据类型                                           | String |
| request_message | 是                           | 目标地址的请求报文                                     | object |

### 回调方编号枚举

| 编号  | 名称     |
| ----- | -------- |
| EO001 | 乐居新房 |
| EO002 | 易楼     |
| EO003 | 房友     |
| EO004 | 楼盘字典 |
| EO005 | 房源仓库 |

### 请求样例

```json
{
    "callback_url":"https://xxx.com/api/doc",
    "callee_no":"b42652fe",
    "caller_no":"b372be686fa6",
    "app_id":"5SV4BVSY0OXQ3ZSA",
    "message_type":"",
    "request_message":{
        "field1":"任意字段",
        "field2":"任意字段",
        ...
    }
}
```

### 响应参数

| 参数       | 类型   | 描述       | 示例值                                    |
| ---------- | ------ | ---------- | ----------------------------------------- |
| request_id | String | 请求ID     | 请求的唯一标识                            |
| code       | String | 响应状态码 | 000状态码为成功响应，其他状态码为失败响应 |
| msg        | String | 响应信息   | 成功或失败的错误信息                      |

### 成功样例

```json
{
    "request_id": "b372be68-6fa6-4590-b927-a4096e6a05e6",
    "code": "000",
    "msg": "成功"
}
```

### 异常样例

```json
{
    "request_id": "b372be68-6fa6-4590-b927-a4096e6a05e6",
    "code": "202",
    "msg": "访问目标路径重试中"
}
```

### 错误样例

```json
{
    "code": "500",
    "msg": "服务调用异常，请稍后再试或联系管理员"
}
```



### 错误码

| 错误码 | 错误描述                                 | 解决方案                           |
| ------ | ---------------------------------------- | ---------------------------------- |
| 400    | 参数{paramName}不能为空                  | 检查参数名称是否正确，参数是否赋值 |
| 202    | 访问目标路径重试中                       | 请稍后查询重试结果                 |
| 500500 | 访问目标路径失败，请稍后再试或联系管理员 | 请稍后再试或联系管理员             |
| 500    | 服务调用异常，请稍后再试或联系管理员     | 请稍后再试或联系管理员             |

