#ETC外部接口对接说明文档（讨论版）

#### 一、主要参与方说明
*渠道C端：好房线上购、易楼特价房、外部渠道平台、线下渠道*

*渠道B端：易楼经纪人*

*代理方：乐居（易居营销）*

#### 二、接口列表
| 序号 | <div style="width:65px">接口提供方</div> | 接口名称 | <div style="width:95px">主要接口参数</div> | <div style="width:90px">主要接口响应</div> | <div style="width:65px">接口使用方</div> | <div style="width:80px">接口调用方式</div> | <div style="width:180px">接口说明</div> |
|:---:|:-------:|:---------|:-------|:-------|:-------:|:-------:|:-------|
| 1 | ETC | 查询楼盘列表 | 省市区板块<br> 楼盘名称 | 楼盘列表信息 | 代理方 | 使用方请求 | 1、支持分页查询<br>2、支持楼盘名称模糊搜索<br> |
| 2 | ETC | 查询楼盘信息 | ETC楼盘ID | 楼盘信息 | 代理方 | 使用方请求 |  |
| 3 | ETC | 创建（保存）项目 | 代理方楼盘ID<br> ETC楼盘ID<br> 代理方楼盘名称<br> 省市区板块<br> 楼盘基本信息<br> 物业信息<br> 周边配套<br> 楼盘点位<br> 楼盘素材信息<br> 代理方项目ID<br> 代理方项目名称<br> 代理方项目信息 | ETC项目信息 | 代理方 | 使用方请求 | 1、接口参数中楼盘素材信息包括楼盘各类型图片、VR以及图文描述等<br> 2、接口参数中项目信息包括项目授权信息、报备策略等<br> 3、接口响应中ETC项目信息包括ETC项目ID |
| 4 | ETC | 创建（保存）产品SKU | 代理方楼盘ID<br> ETC楼盘ID<br> 代理方项目ID<br> 代理方项目名称<br> ETC项目ID<br> 产品SKU信息 | ETC产品SKU | 代理方 | 使用方请求 | 产品SKU包括ETC产品SKU-ID、产品状态、产品价格、佣金策略等 |
| 5 | ETC | 查询项目列表 | ETC项目ID <br>省市区板块<br> ETC楼盘ID<br> 楼盘名称 | ETC项目列表 | 渠道C端<br> 渠道B端 | 使用方请求 | 1、支持分页查询<br> 2、支持楼盘名称模糊查询<br> 3、ETC项目包含ETC产品SKU列表信息 |
| 6 | ETC | 创建（保存）报备记录 | ETC项目ID<br> 委托人姓名<br> 委托人手机号<br> 经纪人ID<br> 经纪人姓名<br> 经纪人手机号<br> 经纪公司ID<br> 经纪公司手机号 | 报备信息 | 渠道B端 | 使用方请求 | 1、渠道B端创建报备<br> 2、渠道B端更新报备 |
| 7 | ETC | 查询报备记录 | ETC项目ID<br> 委托人姓名<br> 委托人手机号<br> | 报备信息 | 渠道C端 | 使用方请求 | 报备信息包括报备ID |
| 8 | ETC | 创建（保存）订单 | ETC项目ID<br> 渠道方订单号<br> ETC产品SKU-ID<br> 委托人姓名<br> 委托人手机号<br> 报备ID<br> 房源信息<br> 房源价格<br> 定金类型<br> 定金价格<br> 订单状态 | ETC订单信息 | 渠道C端<br> 渠道B端 | 使用方请求 | 1、渠道C端<br>（订单创建及支付状态变更）<br> a、定金待支付<br> b、定金部分支付<br> c、定金已支付<br> 2、渠道B端<br> （订单状态为：定金已支付）<br>订单B端分佣状态变更 <br> a、已认购（即已核销）<br> b、已申请分佣<br> c、已完成分佣结算 |
| 9 | ETC | 查询订单信息 | ETC订单ID | ETC订单信息 | 渠道C端<br> 渠道B端<br> 代理方 | 使用方请求 | 提供给渠道方主动查询订单接口 |
| 10 | ETC | 查询分佣记录 | ETC项目ID<br> 经纪人ID<br> 经纪人姓名<br> 经纪人手机号 | 分佣记录 | 代理方<br> 渠道B端 | 使用方请求 | 仅针对前佣部分，待流程确定 |
| 11 | 楼盘字典 | 查询楼盘列表 | 省市区板块<br> 楼盘名称 | 楼盘列表信息 | ETC | 使用方请求 | 1、支持分页查询<br>2、支持楼盘名称模糊搜索 |
| 12 | 楼盘字典 | 查询楼盘信息 | 楼盘字典编号 | 楼盘信息 | ETC | 使用方请求 |  |
| 13 | 楼盘字典 | 保存（同步）楼盘信息 | 楼盘信息 | 楼盘信息 | ETC | 使用方请求 | 返回楼盘字典编号 |
| 14 | 渠道C端<br> 渠道B端<br> 代理方 | 统一信息回调接口 | 消息类型<br> 对象类型<br> 对象ID | 是否成功接收 | ETC | ETC推送 | 接口提供方提供有效回调接口，业务场景中有ETC平台回调通知需求时使用<br> 适用场景：<br> 1、项目创建、更新、下架<br> 2、产品SKU创建、更新、下架<br> 3、订单创建、更新<br> 参数说明：<br> 1、消息类型：新增、更新<br> 2、对象类型：订单、项目<br> 3、对象ID：ETC对象识别ID<br>ETC平台在收到“成功接收”响应前，提供多次回调方案 |
